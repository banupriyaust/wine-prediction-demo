<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wine Prediction Test</title>
  <style>body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:20px} label{display:block;margin-top:8px} textarea{width:100%;height:260px}</style>
</head>
<body>
  <h1>Wine Prediction Test</h1>
  <p>Click <strong>Send</strong> to POST the JSON to <code>/predict</code> and see the response.</p>
  <label for="payload">Request JSON</label>
  <textarea id="payload">{
  "fixed_acidity": 8,
  "volatile_acidity": 0.7,
  "citric_acid": 0.0,
  "residual_sugar": 1.9,
  "chlorides": 0.076,
  "free_sulfur_dioxide": 11,
  "total_sulfur_dioxide": 34,
  "density": 0.9978,
  "pH": 3.51,
  "sulphates": 0.56,
  "alcohol": 9.4
}</textarea>
  <div style="margin-top:12px">
    <button id="send">Send</button>
    <button id="pretty">Pretty JSON</button>
  </div>
  <h2>Response</h2>
  <pre id="response" style="background:#f5f5f5;padding:12px;border-radius:6px;min-height:80px"></pre>

  <script>
    const send = document.getElementById('send')
    const pretty = document.getElementById('pretty')
    const payloadEl = document.getElementById('payload')
    const respEl = document.getElementById('response')

    pretty.addEventListener('click', ()=>{
      try{
        const p = JSON.parse(payloadEl.value)
        payloadEl.value = JSON.stringify(p, null, 2)
      }catch(e){alert('Invalid JSON')}
    })

    send.addEventListener('click', async ()=>{
      let body
      try{ body = JSON.parse(payloadEl.value) }catch(e){ alert('Invalid JSON'); return }
      respEl.textContent = 'Sending...'
      try{
        const r = await fetch('/predict', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body)
        })
        const json = await r.json()
        respEl.textContent = JSON.stringify(json, null, 2)
      }catch(err){
        respEl.textContent = 'Request failed: ' + err.message
      }
    })
  </script>
</body>
</html>
